<!doctype html>
<html lang="en">
  <head>
	<!-- Required meta tags -->
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<!-- Bootstrap CSS -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

	<style>
	  header {
		box-shadow: 0 2px 8px rgba(0, 0, 0, 0.26);
		width: 50%;
		margin-left: 25%;
		margin-top: 5%;
		border-radius: 10px;
		padding: 1rem;
		background-color: #1b995e;
		color: white;
		text-align: center;
	  }

	  .wrapper {
		box-shadow: 0 2px 8px rgba(0, 0, 0, 0.26);
		margin-left: 25%;
		margin-right: 25%;
		margin-top: 5%;
		border-radius: 10px;
		padding: 1rem;
	  }
	</style>

	<title>Project - Ensemble</title>
  </head>
  <body>
	<header>
	  <h1>Ensemble Technique Project GUI</h1>
	</header>
	
	<div class="wrapper">
		<form>
			<div class="form-group row my-3">
				<div class="col-sm-3">
					<label for="Gender" class="col-sm-2 col-form-label"><strong>Gender</strong></label>
				</div>
				<div class="col-sm-6">
					<select id="Gender" class="form-control" name="Gender">
						<option selected>Choose...</option>
						<option value="Male">Male</option>
						<option value="Female">Female</option>
					</select>
				</div>
			</div>
			<div class="form-group row my-3">
				<div class="col-sm-3">
					<label for="SeniorCitizen" class="col-sm-2 col-form-label"><strong>Senior Citizen</strong></label>
				</div>
				<div class="col-sm-6">
					<select id="SeniorCitizen" class="form-control" name="SeniorCitizen">
						<option selected>Choose...</option>
						<option value="No">No</option>
						<option value="Yes">Yes</option>
					</select>
				</div>
			</div>
			<div class="form-group row my-3">
				<div class="col-sm-3">
					<label for="Partner" class="col-sm-2 col-form-label"><strong>Partner</strong></label>
				</div>
				<div class="col-sm-6">
					<select id="Partner" class="form-control" name="Partner">
						<option selected>Choose...</option>
						<option value="No">No</option>
						<option value="Yes">Yes</option>
					</select>
				</div>
			</div>
			<div class="form-group row my-3">
				<div class="col-sm-3">
					<label for="Dependents" class="col-sm-2 col-form-label"><strong>Dependents</strong></label>
				</div>
				<div class="col-sm-6">
					<select id="Dependents" class="form-control" name="Dependents">
						<option selected>Choose...</option>
						<option value="No">No</option>
						<option value="Yes">Yes</option>
					</select>
				</div>
			</div>
			<div class="form-group row my-3">
                <div class="col-sm-3">
                    <label for="Tenure" class="col-sm-2 col-form-label"><strong>Tenure</strong></label>
                </div>                
                <div class="col-sm-6">
                    <input type="number" class="form-control" name= "Tenure" value=0>
                </div>
            </div>
			<div class="form-group row my-3">
				<div class="col-sm-3">
					<label for="PhoneService" class="col-sm-2 col-form-label"><strong>Phone Service</strong></label>
				</div>
				<div class="col-sm-6">
					<select id="PhoneService" class="form-control" name="PhoneService">
						<option selected>Choose...</option>
						<option value="No">No</option>
						<option value="Yes">Yes</option>
					</select>
				</div>
			</div>
			<div class="form-group row my-3">
				<div class="col-sm-3">
					<label for="MultipleLines" class="col-sm-2 col-form-label"><strong>Multiple Lines</strong></label>
				</div>
				<div class="col-sm-6">
					<select id="MultipleLines" class="form-control" name="MultipleLines">
						<option selected>Choose...</option>
						<option value="No">No</option>
						<option value="Yes">Yes</option>
						<option value="No phone">No phone services</option>
					</select>
				</div>
			</div>
			<div class="form-group row my-3">
				<div class="col-sm-3">
					<label for="InternetService" class="col-sm-2 col-form-label"><strong>Internet Service</strong></label>
				</div>
				<div class="col-sm-6">
					<select id="InternetService" class="form-control" name="InternetService">
						<option selected>Choose...</option>
						<option value="DSL">No</option>
						<option value="Fiber">Fiber optic</option>
						<option value="No">No</option>
					</select>
				</div>
			</div>
			<div class="form-group row my-3">
				<div class="col-sm-3">
					<label for="OnlineSecurity" class="col-sm-2 col-form-label"><strong>Online Security</strong></label>
				</div>
				<div class="col-sm-6">
					<select id="OnlineSecurity" class="form-control" name="OnlineSecurity">
						<option selected>Choose...</option>
						<option value="No">No</option>
						<option value="Yes">Yes</option>
						<option value="No internet">No internet services</option>
					</select>
				</div>
			</div>
			<div class="form-group row my-3">
				<div class="col-sm-3">
					<label for="OnlineBackup" class="col-sm-2 col-form-label"><strong>Online Backup</strong></label>
				</div>
				<div class="col-sm-6">
					<select id="OnlineBackup" class="form-control" name="OnlineBackup">
						<option selected>Choose...</option>
						<option value="No">No</option>
						<option value="Yes">Yes</option>
						<option value="No internet">No internet services</option>
					</select>
				</div>
			</div>
			<div class="form-group row my-3">
				<div class="col-sm-3">
					<label for="DeviceProtection" class="col-sm-2 col-form-label"><strong>Device Protection</strong></label>
				</div>
				<div class="col-sm-6">
					<select id="DeviceProtection" class="form-control" name="DeviceProtection">
						<option selected>Choose...</option>
						<option value="No">No</option>
						<option value="Yes">Yes</option>
						<option value="No internet">No internet services</option>
					</select>
				</div>
			</div>
			<div class="form-group row my-3">
				<div class="col-sm-3">
					<label for="TechSupport" class="col-sm-2 col-form-label"><strong>Tech Support</strong></label>
				</div>
				<div class="col-sm-6">
					<select id="TechSupport" class="form-control" name="TechSupport">
						<option selected>Choose...</option>
						<option value="No">No</option>
						<option value="Yes">Yes</option>
						<option value="No internet">No internet services</option>
					</select>
				</div>
			</div>
			<div class="form-group row my-3">
				<div class="col-sm-3">
					<label for="StreamingTV" class="col-sm-2 col-form-label"><strong>Streaming TV</strong></label>
				</div>
				<div class="col-sm-6">
					<select id="StreamingTV" class="form-control" name="StreamingTV">
						<option selected>Choose...</option>
						<option value="No">No</option>
						<option value="Yes">Yes</option>
						<option value="No internet">No internet services</option>
					</select>
				</div>
			</div>
			<div class="form-group row my-3">
				<div class="col-sm-3">
					<label for="StreamingMovies" class="col-sm-2 col-form-label"><strong>Streaming Movies</strong></label>
				</div>
				<div class="col-sm-6">
					<select id="StreamingMovies" class="form-control" name="StreamingMovies">
						<option selected>Choose...</option>
						<option value="No">No</option>
						<option value="Yes">Yes</option>
						<option value="No internet">No internet services</option>
					</select>
				</div>
			</div>
			<div class="form-group row my-3">
				<div class="col-sm-3">
					<label for="Contract" class="col-sm-2 col-form-label"><strong>Contract</strong></label>
				</div>
				<div class="col-sm-6">
					<select id="Contract" class="form-control" name="Contract">
						<option selected>Choose...</option>
						<option value="Month">Month-to-month</option>
						<option value="One year">One year</option>
						<option value="Two year">Two year</option>
					</select>
				</div>
			</div>
			<div class="form-group row my-3">
				<div class="col-sm-3">
					<label for="PaperlessBilling" class="col-sm-2 col-form-label"><strong>Paperless Billing</strong></label>
				</div>
				<div class="col-sm-6">
					<select id="PaperlessBilling" class="form-control" name="PaperlessBilling">
						<option selected>Choose...</option>
						<option value="No">No</option>
						<option value="Yes">Yes</option>
					</select>
				</div>
			</div>
			<div class="form-group row my-3">
				<div class="col-sm-3">
					<label for="PaymentMethod" class="col-sm-2 col-form-label"><strong>Payment Method</strong></label>
				</div>
				<div class="col-sm-6">
					<select id="PaymentMethod" class="form-control" name="PaymentMethod">
						<option selected>Choose...</option>
						<option value="Electronic">Electronic check</option>
						<option value="Mail">Mailed check</option>
						<option value="Bank">Bank transfer (automatic)</option>
						<option value="Credit card">Credit card (automatic)</option>
					</select>
				</div>
			</div>
			<div class="form-group row my-3">
                <div class="col-sm-3">
                    <label for="MonthlyCharges" class="col-sm-2 col-form-label"><strong>Monthly Charges</strong></label>
                </div>                
                <div class="col-sm-6">
                    <input type="number" class="form-control" name= "MonthlyCharges" value=0>
                </div>
            </div>
			<div class="form-group row my-3">
                <div class="col-sm-3">
                    <label for="TotalCharges" class="col-sm-2 col-form-label"><strong>Total Charges</strong></label>
                </div>                
                <div class="col-sm-6">
                    <input type="number" class="form-control" name= "TotalCharges" value=0>
                </div>
            </div>

			<div class="form-group row mt-5">
				<div class="col-sm-6">
					<button type="button" id="submit" class="btn btn-primary">Submit</button>
				</div>	
				<div class="col-sm-6">
					<button type="button" id="predict" class="btn btn-primary">Predict</button>
				</div>				
			</div>
		</form>
		<div id="formValidation" class="alert alert-danger mt-5 d-none" role="alert">
			<p></p>
		</div>
		<div id="finalPrediction" class="alert alert-success mt-3 d-none">
			<p id="prediction"></p>
		</div>
	</div>
	
	
	
	<!-- jQuery  -->
	<script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
	
	<!-- Bootstrap Bundle with Popper -->
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
	
	<!-- AJAX Calls-->
	<script type="text/javascript">
		$("#submit").click(function(){
			var formInputes = {}
			var formValidated = true
			$.each($("form").serializeArray(), function(i, field){
				if (field.value === "Choose...") {
					formValidated = false
				}
				formInputes[field.name] = field.value
			})
			console.log(formInputes)
			console.log(formValidated)
			if (formValidated) {
				$("#formValidation").removeClass("d-none");
				$("#finalPrediction").removeClass("d-none");
				$("#finalPrediction").addClass("d-block");
				$.ajax({
					url: "/predict",
					type: "POST",
					contentType: 'application/json;charset=UTF-8',
					data: JSON.stringify(formInputes),
					success: function(data) {
						console.log(data)
						if (data['errors']) {
							$("#formValidation").removeClass("d-none");
							$("#formValidation").addClass("d-block");
							$("#formValidation.p").text("Something went wrong!")
						} else {
							$("#finalPrediction").text(data['churn'])
						}
						
					},
					error: function(e) {
						console.log(e);
					},
				})
			} else {
				console.log('Dsiplay error')
				$("#formValidation").removeClass("d-none");
				$("#formValidation").addClass("d-block");
				$("#formValidation.p").text("At least one of the drop-down is not selected.")
				
			}
			
		})
	</script>

  </body>
</html>